openapi: 3.0.0
info:
  version: '1.0'
  title: 'APIMRiesgo'
  description: 'Esta API permite realizar el mantenimiento de los riesgos'
  termsOfService: 'https://yanacochaTermsOfService.com.pe'
  contact:
    name: 'Yanacocha TI'
    url: 'https://yanacochait.com.pe'
    
# Added by API Auto Mocking Plugin    
servers:
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/DXC53/APIMRiesgo/1.0
    
tags:
- name: riesgos
  description: Recurso riesgos
  
paths:
  /listarRiesgos:
    get:
      tags:
        - riesgos
        
      responses:
        200:
          description: Transacción correcta
          content:
            application/json:
              schema:
                properties:
                  result:
                    type: object
                    properties:
                      code:
                        type: integer
                        example: 200
                      description:
                        type: string
                        example: Transacción correcta
                      descriptionDetail:
                        type: string
                        example: Riesgos encontrados correctamente
                      timeStamp:
                        type: string
                        example: "2020-04-26T16:56:59.000"
                      transactionId:
                        type: string
                        example: 125312647124
                  riesgo:
                    items:
                      properties:
                        nombre:
                          type: string
                          example: "Riesgo 01"
                        ruta_foto:
                          type: string
                          example: "https:awsS3/38tf4rtgrngn/photo01.png"
                        estado:
                          type: integer
                          example: 1
                              
        400:
          description: Request incorrecto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error400'
                        
        401:
          description: Acceso Denegado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error401'
                
        404:
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error404'
                
        500:
          description: Error interno del servidor
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/error500'       
           
  /riesgo:
    post:
      tags:
        - riesgos
      requestBody:
        description: 'Registrar un riesgo'
        content:
          multipart/form-data:
            schema:
              properties:
                nombre:
                  type: string
                  example: "Riesgo 01"
                imagen_file:
                  type: string
                  example: "{imagen.png}"
                estado:
                  type: integer
                  example: 1
  
      responses:
        200:
          description: Transacción correcta
          content:
            application/json:
              schema:
                properties:
                  result:
                    type: object
                    properties:
                      code:
                        type: integer
                        example: 200
                      description:
                        type: string
                        example: Transacción correcta
                      descriptionDetail:
                        type: string
                        example: Riesgo registrado correctamente
                      timeStamp:
                        type: string
                        example: "2020-04-26T16:56:59.000"
                      transactionId:
                        type: string
                        example: 125312647124
                              
        400:
          description: Request incorrecto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error400'
                        
        401:
          description: Acceso Denegado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error401'
                
        404:
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error404'
                
        500:
          description: Error interno del servidor
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/error500'       
    
    put:
      tags:
        - riesgos
      requestBody:
        description: 'Editar un riesgo'
        content:
          multipart/form-data:
            schema:
              properties:
                id:
                  type: integer
                  example: 4
                nombre:
                  type: string
                  example: "Riesgo 01"
                imagen_file:
                  type: string
                  example: "{imagen.png}"
                estado:
                  type: integer
                  example: 1
  
      responses:
        200:
          description: Transacción correcta
          content:
            application/json:
              schema:
                properties:
                  result:
                    type: object
                    properties:
                      code:
                        type: integer
                        example: 200
                      description:
                        type: string
                        example: Transacción correcta
                      descriptionDetail:
                        type: string
                        example: Riesgo editado correctamente
                      timeStamp:
                        type: string
                        example: "2020-04-26T16:56:59.000"
                      transactionId:
                        type: string
                        example: 125312647124
                              
        400:
          description: Request incorrecto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error400'
                        
        401:
          description: Acceso Denegado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error401'
                
        404:
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/error404'
                
        500:
          description: Error interno del servidor
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/error500'              
  
               
components:
  schemas:
    error400:
      properties:
        result:
          type: object
          properties:
            code:
              type: integer
              example: 400
            description:
              type: string
              example: Request incorrecto
            descriptionDetail:
              type: string
              example: Request incorrecto
            timeStamp:
              type: string
              example: "2020-04-26T16:56:59.000"
            transactionId:
              type: string
              example: 125312647124
    error401:
      properties:
        result:
          type: object
          properties:
            code:
              type: integer
              example: 401
            description:
              type: string
              example: Acceso denegado
            descriptionDetail:
              type: string
              example: Token inválido
            timeStamp:
              type: string
              example: "2020-04-26T16:56:59.000"
            transactionId:
              type: string
              example: 125312647124
    error404:
      properties:
        result:
          type: object
          properties:
            code:
              type: integer
              example: 404
            description:
              type: string
              example: Recurso no encontrado
            descriptionDetail:
              type: string
              example: Recurso no encontrado
            timeStamp:
              type: string
              example: "2020-04-26T16:56:59.000"
            transactionId:
              type: string
              example: 125312647124
    error500:
      properties:
        result:
          type: object
          properties:
            code:
              type: integer
              example: 500
            description:
              type: string
              example: Error interno en el servidor
            descriptionDetail:
              type: string
              example: Error en el procesamiento de la solicitud
            timeStamp:
              type: string
              example: "2020-04-26T16:56:59.000"
            transactionId:
              type: string
              example: 125312647124